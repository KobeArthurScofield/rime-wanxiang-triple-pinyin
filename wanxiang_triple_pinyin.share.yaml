# Rime schema
# encoding: utf-8

switches:
  - name: ascii_mode
    states: ['中', '英']
  - name: full_shape
    states: ['半角', '全角']
  - name: ascii_punct
    states: ['。，', '. , ']
  - options:
      - zh_simp
      - zh_trad
      - zh_cn
      - zh_tw
      - zh_hk
    states:
      - 汉 简体
      - 漢 繁體
      - 中 中国
      - 中 台灣
      - 中 香港澳門

engines:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - affix_segmentor@stroke
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - echo_translator
    - punct_translator
    - script_translator
    - table_translator@stroke
  filters:
    - simplifier@zh_simp
    - simplifier@zh_trad
    - simplifier@zh_cn
    - simplifier@zh_tw
    - simplifier@zh_hk
    - uniquifier
    - reverse_lookup_filter@double_pinyin_reverse_lookup

translator:
  enable_sentence: true
  enable_user_dict: true
  dictionary: wanxiang
  db_class: userdb
  spelling_hints: 8
  always_show_comments: true
  contextual_suggestions: false
  max_homophones: 5
  max_homographs: 5

trad_simp_convert:
  zh_simp:
    option_name: zh_simp
    opencc_config: t2s.json
    tips: all
  zh_cn:
    option_name: zh_cn
    opencc_config: t2s.json
    tips: all
  zh_trad:
    option_name: zh_trad
    opencc_config: s2t.json
    tips: all
  zh_tw:
    option_name: zh_tw
    opencc_config: s2twp.json
    tips: all
  zh_hk:
    option_name: zh_hk
    opencc_config: s2hk.json
    tips: all

punctuator:
  import_preset: default

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    reverse_lookup: "`[a-z]*'?$"

reverse_library:
  stroke:
    tag: stroke
    dictionary: stroke
    prefix: "`"
    suffix: ";"
    tips: 〔筆畫〕
    preedit_format:
      - xlit/hspnz/一丨丿丶乙/

double_pinyin_reverse_lookup:
  tags: [ stroke ]
  overwrite_comment: false
  dictionary: wanxiang

grammar:
  language: wanxiang-lts-zh-hans
  collocation_max_length: 8
  collocation_min_length: 3
  collocation_penalty: -10
  non_collocation_penalty: -12
  weak_collocation_penalty: -24
  rear_penalty: -30

menu:
  page_size: 5

prism_preprocess:
  __append:
    - xform/ń/én/
    - xform/ň/ěn/
    - xform/ǹ/ěn/
    - xform/\bng\b/eng/
    - xform/ńg/éng/
    - xform/ňg/ěng/
    - xform/ṅg/èng/
    - xform/^([a-zA-Z]+)$/$1⑤/
    - xform/^(.*)ā(.*)$/$1a$2①/
    - xform/^(.*)á(.*)$/$1a$2②/
    - xform/^(.*)ǎ(.*)$/$1a$2③/
    - xform/^(.*)à(.*)$/$1a$2④/
    - xform/^(.*)ō(.*)$/$1o$2①/
    - xform/^(.*)ó(.*)$/$1o$2②/
    - xform/^(.*)ǒ(.*)$/$1o$2③/
    - xform/^(.*)ò(.*)$/$1o$2④/
    - xform/^(.*)ē(.*)$/$1e$2①/
    - xform/^(.*)é(.*)$/$1e$2②/
    - xform/^(.*)ě(.*)$/$1e$2③/
    - xform/^(.*)è(.*)$/$1e$2④/
    - xform/^(.*)ī(.*)$/$1i$2①/
    - xform/^(.*)í(.*)$/$1i$2②/
    - xform/^(.*)ǐ(.*)$/$1i$2③/
    - xform/^(.*)ì(.*)$/$1i$2④/
    - xform/^(.*)ū(.*)$/$1u$2①/
    - xform/^(.*)ú(.*)$/$1u$2②/
    - xform/^(.*)ǔ(.*)$/$1u$2③/
    - xform/^(.*)ù(.*)$/$1u$2④/
    - xform/^(.*)ǖ(.*)$/$1v$2①/
    - xform/^(.*)ǘ(.*)$/$1v$2②/
    - xform/^(.*)ǚ(.*)$/$1v$2③/
    - xform/^(.*)ǜ(.*)$/$1v$2④/
    - xform/^(.*)ü(.*)$/$1v$2/
    - xlit/①②③④⑤/12345/

preedit_fmt:
  __append:
    - xlit/67890/12345/
    - xform/0(\w)/$1/
    - xform/([nl])v/$1ü/
    - xform/([jqxy])v/$1u/
    - xform/([nl])ue/$1üe/
    - xform/([nl])üen/$1uen/
    - xform/5/·/
    - xform/eh[0-5]?/ê/
    - 'xform ([aeiou])(ng?|r)([12345]) $1$3$2'
    - 'xform ([aeo])([iuo])([12345]) $1$3$2'
    - 'xform a1 ā'
    - 'xform a2 á'
    - 'xform a3 ǎ'
    - 'xform a4 à'
    - 'xform e1 ē'
    - 'xform e2 é'
    - 'xform e3 ě'
    - 'xform e4 è'
    - 'xform o1 ō'
    - 'xform o2 ó'
    - 'xform o3 ǒ'
    - 'xform o4 ò'
    - 'xform i1 ī'
    - 'xform i2 í'
    - 'xform i3 ǐ'
    - 'xform i4 ì'
    - 'xform u1 ū'
    - 'xform u2 ú'
    - 'xform u3 ǔ'
    - 'xform u4 ù'
    - 'xform ü1 ǖ'
    - 'xform ü2 ǘ'
    - 'xform ü3 ǚ'
    - 'xform ü4 ǜ'
    - xform/[0-5]//
